-- Rights ---------------------------------------------------------

INSERT INTO T_RIGHT ( RIGHT_KEY, RIGHT_NAME, DESCRIPTION ) VALUES ( 5, 'CAN_EDIT', NULL); 

INSERT INTO T_RIGHT ( RIGHT_KEY, RIGHT_NAME, DESCRIPTION ) VALUES ( 6, 'CAN_VIEW', NULL); 

-- Roles ----------------------------------------------------------

INSERT INTO T_ROLE ( ROLE_KEY, ROLE_NAME, DESCRIPTION ) VALUES ( 2, 'CUSTOMER', 'CUSTOMER'); 

INSERT INTO T_ROLE ( ROLE_KEY, ROLE_NAME, DESCRIPTION ) VALUES ( 3, 'ADMINISTRATOR', 'ADMINISTRATOR'); 

-- Role To Rights -------------------------------------------------

INSERT INTO T_ROLE_TO_RIGHT ( ROLE_KEY, RIGHT_KEY, RIGHT_CONTEXT, RIGHT_VALUE )
select ro.ROLE_KEY, ri.RIGHT_KEY, '*', '*' from T_ROLE ro, T_RIGHT ri
 where ro.ROLE_NAME='ADMINISTRATOR' and ri.RIGHT_NAME= 'CAN_VIEW';

INSERT INTO T_ROLE_TO_RIGHT ( ROLE_KEY, RIGHT_KEY, RIGHT_CONTEXT, RIGHT_VALUE )
select ro.ROLE_KEY, ri.RIGHT_KEY, '*', '*' from T_ROLE ro, T_RIGHT ri
 where ro.ROLE_NAME='ADMINISTRATOR' and ri.RIGHT_NAME= 'CAN_EDIT';

INSERT INTO T_ROLE_TO_RIGHT ( ROLE_KEY, RIGHT_KEY, RIGHT_CONTEXT, RIGHT_VALUE )
select ro.ROLE_KEY, ri.RIGHT_KEY, '*', 'self' from T_ROLE ro, T_RIGHT ri
 where ro.ROLE_NAME='CUSTOMER' and ri.RIGHT_NAME= 'CAN_VIEW';

INSERT INTO T_ROLE_TO_RIGHT ( ROLE_KEY, RIGHT_KEY, RIGHT_CONTEXT, RIGHT_VALUE )
select ro.ROLE_KEY, ri.RIGHT_KEY, '*', 'self' from T_ROLE ro, T_RIGHT ri
 where ro.ROLE_NAME='CUSTOMER' and ri.RIGHT_NAME= 'CAN_EDIT';

-- Groups -----------------------------------------------------------

INSERT INTO T_IDENTITY ( IDENTITY_KEY, IDENTITY_NAME, IDENTITY_TYPE_KEY, DESCRIPTION, ENABLED, LOGIN_ENABLED )
select 5, 'GroupAdministrator', IDENTITY_TYPE_KEY, 'Admin', '1', '0' from T_IDENTITY_TYPE where IDENTITY_TYPE_NAME='Group' ;

INSERT INTO T_IDENTITY ( IDENTITY_KEY, IDENTITY_NAME, IDENTITY_TYPE_KEY, DESCRIPTION, ENABLED, LOGIN_ENABLED )
select 6, 'GroupCustomer', IDENTITY_TYPE_KEY, 'Customer group', '1', '0'  from T_IDENTITY_TYPE where IDENTITY_TYPE_NAME='Group' ;

-- -----------------------------------------

INSERT INTO T_IDENTITY_TO_ROLE ( IDENTITY_KEY, ROLE_KEY, POSITION )
select i.IDENTITY_KEY, r.ROLE_KEY, 1 from T_IDENTITY i, T_ROLE r
 where i.IDENTITY_NAME='GroupAdministrator' and r.ROLE_NAME='ADMINISTRATOR';

INSERT INTO T_IDENTITY_TO_ROLE ( IDENTITY_KEY, ROLE_KEY, POSITION )
select i.IDENTITY_KEY, r.ROLE_KEY, 1 from T_IDENTITY i, T_ROLE r
 where i.IDENTITY_NAME='GroupCustomer' and r.ROLE_NAME='CUSTOMER';

-- User --------------------------------------------------

INSERT INTO T_IDENTITY ( IDENTITY_KEY, IDENTITY_NAME, IDENTITY_TYPE_KEY, DESCRIPTION, ENABLED, LOGIN_ENABLED, PWD )
select 9, 'kunde', IDENTITY_TYPE_KEY, 'Kunde', '1', '1', '123456'  from T_IDENTITY_TYPE where IDENTITY_TYPE_NAME='Person' ;

INSERT INTO T_IDENTITY_TO_IDENTITY ( PARENT_IDENTITY_KEY, IDENTITY_KEY )
select i1.IDENTITY_KEY, i2.IDENTITY_KEY from T_IDENTITY i1, T_IDENTITY i2
 where i1.IDENTITY_NAME='GroupCustomer' and i2.IDENTITY_NAME='kunde';

INSERT INTO T_IDENTITY ( IDENTITY_KEY, IDENTITY_NAME, IDENTITY_TYPE_KEY, DESCRIPTION, ENABLED, LOGIN_ENABLED, PWD )
select 10, 'admin', IDENTITY_TYPE_KEY, 'admin', '1', '1', '123456'  from T_IDENTITY_TYPE where IDENTITY_TYPE_NAME='Person' ;

INSERT INTO T_IDENTITY_TO_IDENTITY ( PARENT_IDENTITY_KEY, IDENTITY_KEY )
select i1.IDENTITY_KEY, i2.IDENTITY_KEY from T_IDENTITY i1, T_IDENTITY i2
 where i1.IDENTITY_NAME='GroupAdministrator' and i2.IDENTITY_NAME='admin';

commit ;

-- Rights ---------------------------------------------------------

INSERT INTO T_RIGHT ( RIGHT_KEY, RIGHT_NAME, DESCRIPTION ) VALUES ( 1, 'CAN_EDIT_USER_OF', NULL); 

INSERT INTO T_RIGHT ( RIGHT_KEY, RIGHT_NAME, DESCRIPTION ) VALUES ( 2, 'CAN_EDIT_USER', NULL); 

INSERT INTO T_RIGHT ( RIGHT_KEY, RIGHT_NAME, DESCRIPTION ) VALUES ( 3, 'CAN_EDIT_GROUP', NULL); 

-- Roles ----------------------------------------------------------

INSERT INTO T_ROLE ( ROLE_KEY, ROLE_NAME, DESCRIPTION ) VALUES ( 1, 'RootRole', 'RootRole'); 

-- Role To Rights -------------------------------------------------

INSERT INTO T_ROLE_TO_RIGHT ( ROLE_KEY, RIGHT_KEY, RIGHT_CONTEXT, RIGHT_VALUE )
select ro.ROLE_KEY, ri.RIGHT_KEY, '*', '*' from T_ROLE ro, T_RIGHT ri
 where ro.ROLE_NAME='RootRole' and ri.RIGHT_NAME= 'CAN_EDIT_USER_OF';

INSERT INTO T_ROLE_TO_RIGHT ( ROLE_KEY, RIGHT_KEY, RIGHT_CONTEXT, RIGHT_VALUE )
select ro.ROLE_KEY, ri.RIGHT_KEY, '*', 'true' from T_ROLE ro, T_RIGHT ri
 where ro.ROLE_NAME='RootRole' and ri.RIGHT_NAME= 'CAN_EDIT_USER';

INSERT INTO T_ROLE_TO_RIGHT ( ROLE_KEY, RIGHT_KEY, RIGHT_CONTEXT, RIGHT_VALUE )
select ro.ROLE_KEY, ri.RIGHT_KEY, '*', 'true' from T_ROLE ro, T_RIGHT ri
 where ro.ROLE_NAME='RootRole' and ri.RIGHT_NAME= 'CAN_EDIT_GROUP';

-- Identity Types--------------------------------------------------

INSERT INTO T_IDENTITY_TYPE ( IDENTITY_TYPE_KEY, IDENTITY_TYPE_NAME ) VALUES ( 1, 'Group' ) ;

INSERT INTO T_IDENTITY_TYPE ( IDENTITY_TYPE_KEY, IDENTITY_TYPE_NAME ) VALUES ( 2, 'Person' ) ;

-- Root -----------------------------------------------------------
INSERT INTO T_IDENTITY ( IDENTITY_KEY, IDENTITY_NAME, IDENTITY_TYPE_KEY, DESCRIPTION, ENABLED, LOGIN_ENABLED )
select 1, 'RootGroup', IDENTITY_TYPE_KEY, 'Root group', '1', '0'  from T_IDENTITY_TYPE where IDENTITY_TYPE_NAME='Group' ;

INSERT INTO T_IDENTITY ( IDENTITY_KEY, IDENTITY_NAME, IDENTITY_TYPE_KEY, DESCRIPTION, ENABLED, LOGIN_ENABLED, PWD )
select 2, 'root', IDENTITY_TYPE_KEY, 'Root user', '1', '1', '123456'  from T_IDENTITY_TYPE where IDENTITY_TYPE_NAME='Person' ;

INSERT INTO T_IDENTITY_TO_IDENTITY ( PARENT_IDENTITY_KEY, IDENTITY_KEY )
select i1.IDENTITY_KEY, i2.IDENTITY_KEY from T_IDENTITY i1, T_IDENTITY i2
 where i1.IDENTITY_NAME='RootGroup' and i2.IDENTITY_NAME='root';

----------------------------------------------------------------------

INSERT INTO T_IDENTITY_TO_ROLE ( IDENTITY_KEY, ROLE_KEY, POSITION )
select i.IDENTITY_KEY, r.ROLE_KEY, 1 from T_IDENTITY i, T_ROLE r
 where i.IDENTITY_NAME='RootGroup' and r.ROLE_NAME='RootRole';

commit ;

\g
\q
